<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0a0a">
  
  <title>Forgot Password — ASPD Forum</title>
  <meta name="robots" content="noindex, nofollow">
  
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="apple-touch-icon" href="sigil.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- Noise Overlay -->
  <div class="noise" aria-hidden="true"></div>

  <!-- Auth Layout -->
  <main class="auth-container" data-page="forgot-password" role="main">
    <div class="auth-content">
      <h1 class="auth-title">RESET PASSWORD</h1>
      
      <p style="color: #505050; font-size: 0.8rem; margin-bottom: 2rem; text-align: center;">
        Enter the email address associated with your account.
      </p>
      
      <form class="auth-form" id="forgot-form" aria-label="Password reset form">
        <div class="auth-field">
          <label class="auth-label" for="email">EMAIL</label>
          <input type="email" id="email" name="email" class="auth-input" required autocomplete="email" placeholder="Your email address">
        </div>
        
        <button type="submit" class="auth-btn">SEND RESET LINK</button>
      </form>
      
      <div id="success-message" style="display: none; text-align: center; padding: 2rem 0;">
        <p style="color: #606060; font-size: 0.85rem; margin-bottom: 1rem;">
          If an account exists with this email, a reset link has been sent.
        </p>
        <p style="color: #404040; font-size: 0.75rem;">
          Check your inbox and spam folder.
        </p>
      </div>
      
      <nav class="auth-links" aria-label="Account navigation">
        <a href="login.html" class="auth-link">← BACK TO LOGIN</a>
      </nav>
    </div>
  </main>

  <script src="js/auth-state.js"></script>
  <script src="js/notify.js"></script>
  <script>
    (function() {
      'use strict';
      var form = document.getElementById('forgot-form');
      var submitBtn = form.querySelector('button[type="submit"]');
      var successMessage = document.getElementById('success-message');
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        var email = document.getElementById('email').value.trim();

        if (!email) {
          Notify.show('EMAIL REQUIRED', 'error');
          return;
        }

        submitBtn.disabled = true;
        submitBtn.textContent = 'SENDING...';

        fetch(AuthState.API_BASE + '/api/auth/forgot-password', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: email })
        })
        .then(function(res) { return res.json(); })
        .then(function(data) {
          form.style.display = 'none';
          successMessage.style.display = 'block';
        })
        .catch(function(err) {
          submitBtn.disabled = false;
          submitBtn.textContent = 'SEND RESET LINK';
          Notify.show('CONNECTION ERROR', 'error');
        });
      });
    })();
  </script>

</body>
</html>
